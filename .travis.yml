language: C
os:
  - osx
  - linux
env:
  matrix:
    - PYTHON_VERSION="3.7"
      NUMPY_VERSION="1.15" SCIPY_VERSION="1.1"
      COVERAGE="false"
      DEPLOY_PYPI_SOURCE="False"
    - PYTHON_VERSION="3.8"
      NUMPY_VERSION="1.16" SCIPY_VERSION="1.4"
      COVERAGE="true"
      DEPLOY_PYPI_SOURCE="True"
    - PYTHON_VERSION="3.9"
      NUMPY_VERSION="1.16" SCIPY_VERSION="1.5"
      COVERAGE="false"
      DEPLOY_PYPI_SOURCE="False"
sudo: required
before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then CC=g++ ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then CXX=g++; fi
install: source continuous_integration/Travis/install_dependencies.sh
script:
  - flake8 .
  - bash continuous_integration/Travis/test_script.sh
after_success:
  - if [[ "$COVERAGE" == "true" ]]; then coveralls; fi
deploy:
  provider: script
  script: bash continuous_integration/Travis/deploy_script.sh
  on:
    branch: master
